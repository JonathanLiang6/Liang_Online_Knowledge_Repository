### 4.2.1 符号定义伪指令

1. **等值伪指令 EQU**
    - **格式**：符号名 EQU 表达式
    - **功能**：用 EQU 左边的符号名代表右边的表达式。例如，`MOVE EQU MOV`使`MOVE`代表`MOV`指令；`CONST EQU 60`将常量 60 定义为符号名`CONST`；`STR EQU "!How are you!"`把字符串定义为符号名`STR`。
    - **说明**：用 EQU 已定义的符号不能被重新定义，若需要重新定义，需用`PURGE`先解除。`PURGE`的格式为`PURGE　符号1，符号2，...，符号n` 。
2. **等号伪指令 =**
    - **功能**：与 EQU 类似，用符号名代表表达式，但允许重新定义。例如，先定义`EMP=7.1273941546`，之后可重新定义`EMP=８.41546273` 。
    - **特别注意**：用 EQU、= 定义的符号不占用存储器单元，汇编程序不为这样的符号分配存储空间。

### 4.2.2 变量定义伪指令

1. **格式与功能**
    - **格式**：变量名 伪指令助记符 操作数 ；注释
    - **功能**：定义变量的类型、名字，并为变量中的操作数项分配存储单元。其中，变量名由用户起名；伪指令助记符有 DB（字节）、DW（字）、DD（双字）、DF、DQ、DT 等；操作数可以是常数或表达式；注释用于说明伪指令的功能，可有可无。
2. **操作数的表达式形式**
    - **数值表达式**：给变量赋予数值初值。例如，`Data segment`中定义`A DB 10,5,30H`，`B DW 100H,100,-4`，`C DD 2*30,-100` ，汇编后按定义分配内存空间存储相应数值。
    - **地址表达式**：只适用于 DW 和 DD 两个伪指令。例如，`DATA SEGMENT`中定义`X DW 2,1,$+5,7,8,$+5`，`Len db $-x` ，其中`$`表示地址计数器的当前值，每进入一个新段地址计数器清零，每分配一个单元自动加 1。在此例中，地址计数器会根据定义不断变化，影响变量的存储地址。
    - **字符串表达式**：用 DB 定义字符串。例如，`DATA SEGMENT`中`STR1 DB ‘12’`，`STR2 DB ‘HELLO!’` ，字符串按字符顺序存储在内存中。注意 3 个及以上的字符，只能用 DB 定义；用 DW 定义字符串时，每个字符占一个字单元，如`STR3 DW ‘CD’,‘3’` 。
    - **? 表达式**：操作数是 “?” 时，只用来保留内存空间，但不存入数据，即初始值未定义。例如，`A DB 0,1,?,?,?` ，汇编后相应内存单元预留但无初始值。
    - **带 DUP 的表达式**：格式为`n DUP(表达式1,表达式2,…,表达式n)` ，功能是利用给出的一个或一组初值来重复地初始化存储单元。`n`为重复次数，括号中的内容为被重复的内容，`n`与 DUP 之间需有空格，DUP 还可以嵌套。例如，`DAT DW 2 DUP(10H,2 DUP(1,2))` ，内存会按此重复模式分配空间。

### 4.2.3 段定义伪指令

1. **段定义伪指令 SEGMENT/ENDS**
    - **格式**：段名 SEGMENT [定位类型] [组合类型] [’类别’] ；段体内容 段名 ENDS
    - **解释**：`SEGMENT`和`ENDS`总是成对出现，二者前面的段名一致，由用户起名。它们之间的内容可以是指令和其他伪指令，表示存放在该段内存中的变量、指令或其他伪指令对该段内存的处理。习惯上根据段体性质起段名，如用 DATA 作为数据段段名，用 CODE 作为代码段段名。
2. **指定段寄存器伪指令 ASSUME**
    - **格式**：ASSUME 段寄存器名：段名 [，段寄存器名：段名……]
    - **功能**：建立段寄存器与段之间的关系，即指出某个段的段地址在哪个段寄存器中。例如，`ASSUME CS：CODE，DS：DATA` 。
    - **说明**：ASSUME 伪指令只是告知汇编程序有关段寄存器与段的关系，并没有给段寄存器赋予实际初值。CS、IP 的初始值由伪指令 “END 起始标号” 装入；堆栈段定义时若用了 STACK，系统会自动初始化 SS、SP；通常在程序中仅需对 DS、ES 段寄存器作初始化，可通过`MOV AX,DATA`和`MOV DS,AX`（实现将段地址装入数据段寄存器）、`MOV ES,AX`（装入附加段寄存器）等指令完成。
3. **置汇编地址计数器伪指令 ORG**
    - **格式**：ORG 数值表达式
    - **功能**：将数值表达式的值赋给汇编地址计数器，规定了段内的起始偏移地址，表达式的值即为段内的起始偏移地址，从此地址起连续存放程序或数据。数值表达式的值须为 0 - 65535 之间的非负整数。例如，`DATA SEGMENT`中先`ORG 10` ，则后续变量`VAR1`从偏移地址 10 开始存放；再`ORG $+5` ，则`VAR2`从新的偏移地址（假设`VAR1`占用空间后`$`值为 14，`14 + 5 = 19` ）19 开始存放 。

### 4.2.4 其它伪指令

1. **LABEL 类型定义伪指令**
    - **格式**：名字　LABEL　类型
    - **功能**：为要使用的变量或标号定义一种新类型或修改原类型属性，通常与数据定义伪指令连用，功能类似语句 “变量名或标号 EQU THIS 类型”。“名字” 可以是变量或标号，当为变量时，类型是 BYTE、WORD、DWORD 等，当为标号时，类型是 NEAR 或 FAR。例如，`data segment`中定义`ba label byte`和`wa dw 100 dup(?)` ，定义了地址相同、类型不同的两个变量：字节类型变量`ba`与字类型变量`wa` 。
2. **源程序结束伪指令 END**
    - **格式**：END [启动地址]
    - **功能**：标志整个程序的结束，是源程序的最后一条语句。源程序中必须有 END 结束语句，启动地址可是一个标号或过程名，指示程序的入口。程序装入内存后，系统跳转到程序的入口处开始执行。
### [[../../MCU_Contents/第4章 汇编语言程序设计|回到目录]]