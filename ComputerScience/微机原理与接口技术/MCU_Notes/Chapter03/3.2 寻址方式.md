**寻址方式**：操作数的存放形式与寻找操作数的方式
依据寻址方式可方便访问各类操作数。
在 8086 指令系统中，说明操作数所在地址的寻址方式分为 3 大类（7 小种）
![[../../MCU_Picture/Pasted image 20250508170438.png]]
### 3.2.1 立即寻址
操作数包含在指令中，紧跟操作码并与操作码一同存于代码段，随代码被取入 CPU 的指令队列，指令执行时无需再访问存储器。
**操作数**可以是计算机有效数制下的数值，也可以是带单引号的字符。  
```assembly
MOV AX,3102H  ; 执行后 AX = 3102H
MOV AL,'A'    ; 执行后 AL = 41H
```
需注意：
1. 立即数只能作为源操作数使用，常用于给寄存器赋初值。
2. 源操作数和目的操作数的类型要相互匹配。
例如，`MOV 05H,AL`、`MOV BL,324D`、`MOV CH,2050H` 、`MOV DL,‘25’` 等指令是错误的，原因分别是立即数不能作目的操作数、源操作数和目的操作数类型不匹配等。
### 3.2.2 寄存器寻址
操作数存放在某个寄存器中，源操作数与目的操作数字长需相同（匹配）。  
```assembly
; 将寄存器 BX 中的值传送到寄存器 AX 中
MOV AX, BX
; 将寄存器 AX 中的值传送到内存地址为 DS×16 + 3F00H 的存储单元中
MOV [3F00H], AX
; 将寄存器 AL 中的值传送到寄存器 CL 中
MOV CL, AL
```
`MOV AX,BL` 是错误的，因为字长不同。
寄存器寻址的操作数在寄存器reg中，无需访问总线，执行速度快，若选用AX，执行指令时间更短。
### 3.2.3 存储器寻址
程序运行时大部分数据存于内存，存储器寻址方式用于确定内存中的数据。
其特点为：
操作数在存储器中，操作数的有效地址 EA 由指令提供，段地址在默认的或段超越前缀指定的段寄存器中。
存储器寻址方式有 5 种：
#### **直接寻址**：在指令中直接给出操作数所在单元的偏移地址
有两种形式:
1. 一种是直接写偏移地址，如 `MOV AX,[2050H]`，默认段寄存器为 DS，操作数的物理地址为 `DS×16 + 2050H`
2. 另一种是偏移地址以变量形式出现，如 `MOV SI,BUF` 。也可使用 “段超越” 前缀显式指定其他段寄存器，如 `MOV DX,ES:[2050H]`，此时操作数的物理地址为 `ES×16 + 2050H`。
例如，若 `DS = 3000H`，执行 `MOV AX,[2000H]` 指令，操作数的物理地址为 `30000H + 2000H = 32000H`，若 `(32000H)=02H`，`(32001H)=31H` ，则指令执行后 `AX = 3102H`。要注意与 `MOV AX,2000H` 区分，前者是从内存地址 `DS×16 + 2000H` 中取数传送给 AX，后者是将立即数 2000H 传送给 AX。
#### **寄存器间接寻址**：操作数的偏移地址存放在寄存器中
只有 SI、DI、BX 和 BP 可作间址寄存器。例如：
- 字节操作：`MOV AL,[BX]`，操作数的物理地址为 `DS×16 + BX`，将该地址处的字节数据传送给 AL。
- 字操作：`MOV AX,[SI]`，操作数的物理地址为 `DS×16 + SI`，将该地址处的字数据传送给 AX。
- 双字操作：`MOV EAX,[DI]`，操作数的物理地址为`DS×16 + DI`，将该地址处的双字数据传送给 EAX。
当使用 BP 作为间址寄存器时，段寄存器使用 SS，如 `MOV AX,[BP]`，操作数的物理地址为 `SS×16 + BP`。也可使用段超越，如 `MOV AX,ES:[BX]`，操作数的物理地址为 `ES×16 + BX` 。
例如，若 `DS = 5000H`，`SI = 1300H`，`(51300H)=45H`，`(51301H)=35H`，执行 `MOV AX,[SI]` 指令后，`AX = 3545H`。  

#### **寄存器相对寻址**：有效地址 EA 等于间址寄存器的内容加上一个 8/16 位的位移量
即 `EA = 间址寄存器（BX、BP、SI、DI） + 8位或16位位移量`。
操作数的书写形式多样，如`MOV AX,BUF[BX]`与`MOV AX,[BX + BUF]`、`MOV AX,[BUF + BX]` 、`MOV AX,[BX]BUF`等价。例如，设`DS = 3000H`，`BX = 1000H`，`BUF = 4000H`，物理地址`(35000H)`字单元中的内容为`1990H`，执行`MOV AX,BUF[BX]`指令后，`AX = 1990H`。  

#### **基址变址寻址**：操作数的偏移地址由一个基址寄存器（BX 或 BP）的内容和一个变址寄存器（SI 或 DI）的内容相加形成
即 `EA = 基址寄存器（BX或BP） + 变址寄存器（SI或DI）`。
正确示例有 `MOV AX,[BX][SI]`、`MOV AX,[BX + SI]`、`MOV AX,DS:[BP][DI]` 等；
错误示例如`MOV AX,[BX][BP]`、`MOV AX,[DI][SI]` 。例如，设`DS = 2000H`，`BX = 8000H`，`SI = 1000H`，物理地址`(29000H)`单元内容为`5678H`，执行`MOV AX,[BX][SI]`指令后，`AX = 5678H`。  

#### **基址变址相对寻址**：在基址 + 变址寻址的基础上增加一个 8 位或 16 位位移量，三者之和为位移地址
 即`EA = 基址寄存器（BX或BP） + 变址寄存器（SI或DI） + 8位或16位位移量`。
 操作数也有多种等价形式，如`MOV DX,disp[BX][SI]`与`MOV DX,disp[BX + SI]`、`MOV DX,[BX + SI + disp]`、`MOV DX,[BX + SI]disp` 等价。
 例如，设`DS = 3000H`，`BX = 2000H`，`SI = 1000H`，位移量`disp = 0250H`，物理地址`= DS×16 + BX + SI + disp = 30000H + 2000H + 1000H + 0250H = 33250H`的字单元内容为`3132H`，执行`MOV DX,disp[BX][SI]`指令后，`DX`中的内容为`3132H`。

**小结**：指令由操作码和操作数构成，获取操作数的方式称为寻址。在直接寻址中，地址可用符号代替，如 “`MOV AX,BUF`” 相当于 “`MOV AX,[xxxxH]`”，“BUF” 称为变量或符号地址。偏移量可以是变量或常量。如果一条指令有两个操作数，源操作数和目的操作数的寻址方式可能相同，也可能不同，如指令 “`MOV AX,[BX]`”，源操作数为寄存器间接寻址，目的操作数为寄存器寻址。
### [[../../MCU_Contents/第3章 寻址方式与指令系统|回到目录]]