**目标**：发现并解决一个**帧**内部的**位错**
**解决方案**：
1. 接收方发现比特错后丢弃帧，之后通知发送方重传帧 $\Rightarrow$ 检错编码
2. 接收方发现并纠正比特错误 $\Rightarrow$ **纠错编码**
### 3.2.1 检错编码
#### 3.2.1.1 奇偶校验码
**信息位（有效数据）**：指帧的数据部分。  
**校验位（冗余位）**：为了给帧的数据部分检错/纠错而附加的一些冗余比特。  

添加位置：在信息位的首部或尾部添加一个校验位。  

**奇校验**：整个校验码（信息位和校验位）中 $1$ 的个数为奇数。  
**偶校验**：整个校验码（信息位和校验位）中 $1$ 的个数为偶数。  

**检错能力**：奇偶校验码仅能检测出奇数位错误，无纠错能力。  

**异或运算（模二加）**：  
- 两个比特进行异或运算，当二者“相异”时计算结果为 $1$。  
- 将“偶校验”的信息位与校验位全部异或，若结果为 $0$ 说明没有错误。
#### 3.2.1.2 循环冗余校验码（CRC）
**由生成多项式确定“除数”**  
若生成多项式中 $x$ 的最高次为 $R$，则“除数”有 $R+1$ 位。

**构造过程**  
1. 在 $K$ 个信息位后补 $R$ 个 $0$，作为“被除数”。  
2. 被除数与除数进行“模二除”，得到 $R$ 位余数。  
![[../../CN_Picture/Pasted image 20251121133205.png]]
3. 将 $K$ 个信息位与 $R$ 位余数拼接，形成最终的 CRC 码（共 $K+R$ 位）。

**校验过程**  
接收方收到 $K+R$ 位数据后，用相同的**生成多项式**进行**模二除**，计算 $R$ 位余数：  
- 余数为 $0$，说明无错误；  
- 余数非 $0$，说明出错。

**检错与纠错能力**  
1. 可检测出所有奇数个错误；  
2. 可检测出所有双比特错误；  
3. 可检测出所有小于等于校验位长度（R）的连续错误；  
4. 若选择合适的生成多项式，且满足 $2^R \geq K+R+1$，则可纠正单比特错。
### 3.2.2 纠错编码（海明码）
**基本思想**：
- **信息位**分组偶校验，多个校验位可反映出错位置。  
#### 3.2.2.1 校验设计
##### **确定校验位个数**  
- 设信息位 n 位，校验位 k 位，需满足  
  $2^k \geq n + k（任何一位都可能出错） + 1（唯一正确状态）$  
##### **校验位分布**  
- 校验位 $P_i$ 放在位号为 $2^{i-1}$ 的位置
	- 即校验位 P₁, P₂, P₃, … 依次放在位置 1, 2, 4, …（2 的幂次方）。 
- 空出的其余位置按顺序填入信息位。  
##### **校验码求解**
1. 将信息位的位置序号用 k 位二进制表示。  
2. 校验位 Pᵢ 与所有位置序号第 i 位为 1 的信息位归为同一组，进行偶校验。
假设信息位 $D_4D_3D_2D_1$ 共四位，校验位 $P_3P_2P_1$ 共三位
![[../../CN_Picture/Pasted image 20251121135628.png]]
 ![[../../CN_Picture/Pasted image 20251121135607.png]]
 ##### 纠错
- 对 P₁, P₂, P₃, … 所属各分组进行异或（相当于分组偶校验），得到S₃S₂S₁
  - S₃S₂S₁ = 000 说明无错误。  
  - S₃S₂S₁ ≠ 000，则其值即为出错位置。  
#### 3.2.2.2 补充  
- 海明码本身具备 1 位纠错、2 位检错能力。  
- 为区分 1 位错与 2 位错，需再添加 1 位“全校验位”对整体进行偶校验。  
- 注意：部分题目位置编号可能从小到大，但处理方法相同。
### [[../../CN_Contents/第三章 数据链路层|回到目录]]