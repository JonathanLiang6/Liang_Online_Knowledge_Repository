### 1.6.1 体系结构介绍
#### 1.6.1.1 计算机网络需求
1. 必须有一条传送数据的通路.
2. 发起方必须激活通路。
3. 要告诉网络如何识别接收方
4. 发起方要清楚对方是否已开机，且与网络连接正常
5. 发起方要清楚对方是否准备好接收和存储文件。
6. 若文件格式不兼容，要完成格式的转换。
7. 要处理各种差错和意外事故，保证收到正确的文件。
#### 1.6.1.2 现有体系结构
![[../../CN_Picture/Pasted image 20251028142901.png]]
#### 1.6.1.3 概念解析

^5b1743

网络的**体系结构** (NetworkArchitecture) 是计算机网络的**各层及其协议**的集合，就是这个计算机网络及其构件所应完成的功能的精确定义 (不涉及实现)。
**实现** (implementation) 是遵循这种体系结构的前提下，用何种硬件或软件完成这些功能的问题。
体系结构是抽象的；而实现是具体的
**实体**：在计算机网络的分层结构中，第 n 层中的活动元素(软件+硬件) 通常称为第 n 层实体
同机器上的同一层称为**对等层**，同层的实体称为**对等实体**。
**协议**，即网络协议 (NetworkProtocol)，是控制对等实体之间进行通信的规则的集合，是水平的。
**接口**: 即同一节点内相邻两层的实体交换信息的逻辑接口，又称为服务访问点 (Service AccessPoint SAP)
**服务**: 服务是指下层为**紧邻的**上层提供的功能调用，它是**垂直的**。
![[../../CN_Picture/Pasted image 20251028145701.png]]
### 1.6.2 协议
#### 1.6.2.1 概念介绍
[[#^5b1743|协议]]
![[../../CN_Picture/Pasted image 20251028151103.png]]
- **PDU**：对等层次之间传送的数据单位，第n层记为n-PDU
- **SDU**：为完成上一层实体所要求的功能而传送的数据，第n层记为n-SDU
- **PCI**：控制协议操作的信息，第n层记为n-PCI
- n-SDU+n-PCI=n-PDU=(n-1)-SDU
#### 1.6.2.2 协议的三要素
- **语法**：数据与控制信息的结构或格式。 
- **语义**：需要发出何种控制信息，完成何种动作以及做出何种响应。
- **同步**：执行各种操作的条件、时序关系等，即事件实现顺序的详细说明。
### 1.6.3 分层
#### 1.6.3.1 优缺点
- **优点**
	- 各层独立：本层只需关心自身功能，无需了解其他层实现细节  
	- 灵活性好：任一层内部修改不影响其他层  
	- 结构可分割：复杂问题被拆分为若干可管理子问题  
	- 易于实现与维护：模块化设计降低开发、调试、升级难度  
	- 促进标准化：每层接口清晰，便于形成统一标准  
- **缺点**
	- 功能重复：不同层可能出现相似机制（如差错控制）  
	- 额外开销：层间交互引入接口处理、缓存、上下文切换等成本  
	- 层数权衡：层数太少→单层次协议复杂；层数太多→系统集成与描述困难  
#### 1.6.3.2 各层主要功能
- **差错控制**：使对等层通信更可靠（校验、重传、确认）  
- **流量控制**：调节发送速率，保证接收端来得及接收（滑动窗口、速率限制）  
- **分段与重装**：发送端把大数据块拆小，接收端还原（适配不同层 PDU 大小）  
- **复用与分用**：发送端多路上层会话共享一条下层连接，接收端再分离  
- **连接建立与释放**：数据交换前先建立逻辑连接，结束后按序释放资源  
#### 1.6.3.3 五层协议模型

| 层次  | 名称    | 主要协议/功能                                                                     |
| --- | ----- | --------------------------------------------------------------------------- |
| 5   | 应用层   | HTTP、DNS、SMTP、FTP 等应用协议；通过进程交互完成特定网络应用                                      |
| 4   | 运输层   | TCP（面向连接、可靠传输，单位：报文段）；UDP（无连接、best-effort，单位：用户数据报）；提供进程间通用数据传输服务，具备复用/分用功能 |
| 3   | 网络层   | IP（无连接、网际层）；路由选择生成转发表、分组转发；辅以 ICMP、ARP 等协议                                  |
| 2   | 数据链路层 | 成帧、MAC 寻址、差错检测（丢弃或可靠传输纠正）；相邻节点间可靠链路                                         |
| 1   | 物理层   | 比特 0/1 传输；定义电缆引脚、电气/光学特性；物理媒体（双绞线、光纤、无线）在物理层之下                              |
### 1.6.4 [[#1.6.1.2 现有体系结构|OSI模型]]
#### 1.6.4.1 OSI 模型分层
从最高到最低分别为

| 层级  | 名称    | 设备          |
| --- | ----- | ----------- |
| 7   | 应用层   | 主机（全部）      |
| 6   | 表示层   |             |
| 5   | 会话层   |             |
| 4   | 传输层   |             |
| 3   | 网络层   | 路由器（1.2.3.） |
| 2   | 数据链路层 | 交换机（1.2.）   |
| 1   | 物理层   | 集线器（1）      |
| 0   | 不属于层次 | 物理传输媒体      |
数据的分段（7 $\Rightarrow$ 1）与重装（1 $\Rightarrow$ 7）
#### 1.6.4.2 各层级功能：
##### 物理层：实现相邻节点之间比特的传输
1. 需定义电路接口参数 `e.g 形状/尺寸/引脚`
2. 定义传输信号的含义，电气特征 `e.g 高低电平是多少，每比特电信号持续时间等`
- 以**比特**为单位
##### 数据链路层：确保相邻节点之间的链路逻辑上无差错
1. **差错控制**：检错+纠错/检错+丢弃+重新传输
2. **流量控制**：协调两个节点的速率
- 以**帧**为单位，一个分组由多个帧组成
##### 网络层：把分组从源节点转发到目的节点
1. **路由选择**: 构造并维护路由表，决定分组到达目的节点的最佳路径
2. **分组转发**:将“分组”从合适的端口转发出去
3. **拥塞控制**:发现网络拥塞，并采取措施缓解拥塞
4. **网际互联**：实现异构网络互联 
- 以**分组**为单位，其他功能：差错/流量控制，连接建立与释放，可靠传输管理
##### 传输层：实现端到端通信
即实现进程到进程的通信，端指端口
1. **复用和分用**：发送端几个高层实体复用低层的连接，在接收端再进行分用。
2. **其他功能**：可靠传输管理、差错控制、流量控制、连接建立与释放。
- 以**报文段**为单位
##### 会话层：管理进程间会话
**会话管理**：采用**检查点机制**，通信失效时从检查点回复通信
##### 表示层任务：解决不同主机上信息表示不一致的问题  
主要功能：数据格式转换（如编码转换、压缩/解压、加密/解密）
##### 应用层任务：实现特定的网络应用
以**报文**为单位功能繁多，根据应用需求设计
### 1.6.5 TCP/IP 模型
#### 1.6.5.1 各个层次
1. 应用层（合并了 OSI 的应用/表示/会话）  
2. 传输层（TCP/UDP）  
3. 网际层/网络层（IP）  
4. 网络接口层（对应 OSI 数据链路+物理）、
#### 1.6.5.2 各个层次的任务
**TCP/IP的理念**：如果某些应用需要数据格式转换、会话管理功能，就交给应用层的特定协议去实现。
##### 网络接口层：实现相邻节点间数据传输
具体传输方式不做规定
使得模型拥有更强灵活性、适应性
##### 网络层：路由选择，分组转发
拥塞控制，网际互连
##### 传输层：复用和分用
差错控制，流量控制，连接建立与释放，可靠传输管理
##### 总结
- 数据传输的正确可靠由传输层负责
- 网络核心部分（路由器）功能简单，负载低
- OSI 参考模型 vs TCP/IP 模型（仅比较红/蓝框文字）
	- **传输层**
	- OSI 传输层仅可向上层提供：有连接的可靠的服务  
	- TCP/IP 传输层可向上层提供：有连接可靠的服务（TCP协议）、无连接不可靠的服务（UDP协议）  
	- **网络层**
	- OSI 网络层向上层提供：有连接可靠的服务（虚电路）、无连接不可靠的服务（数据报）  
	- TCP/IP 网络层仅向上层提供：无连接不可靠的服务（数据报）  
### [[../../CN_Contents/第一章 概述|回到目录]]