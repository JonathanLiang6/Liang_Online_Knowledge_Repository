## 6.1
无条件传送：任何时候无条件发送/接收数据，要求最少
查询：每次发送/接收数据时检测是否满足条件，只有满足条件才能发送/接收数据；因此耗费大量 CPU 时间
中断：CPU 暂停正在执行的程序，转而去处理 I/O。经由中断请求、中断检测、中断响应、中断服务、中断返回几步进行 I/O 操作。虽然不需要 CPU 查询发送/接收数据的条件，但是最终的数据传送还是要靠 CPU 执行相应的程序（中断服务程序）来完成
DMA：在内存和外设之间增设一个专门部件，由它来代替 CPU 负责在内存和外设之间传送数据。可以利用有限的内存空间执行大规模程序，处理大规模数据；可以在不同任务间共享内存空间。
## 6.2
### (1) **平均每秒Cache缺失的次数与主存带宽要求**
#### Cache缺失的次数计算：
CPU的主频为80 MHz，即每秒可执行 $80 \times 10^6$ 个时钟周期。  
每条指令的CPI为4，则每秒可执行的指令数为：
$\text{指令数} = \frac{\text{主频}}{\text{CPI}} = \frac{80 \times 10^6}{4} = 20 \times 10^6 \, \text{条指令/秒}$.
平均每条指令访存次数为1.5次，因此总的访存次数为：
$\text{访存次数} = 20 \times 10^6 \times 1.5 = 30 \times 10^6 \, \text{次访存/秒}.$
Cache命中率为99%，则缺失率为 1−0.99=0.01
平均每秒Cache缺失的次数为：
$\text{缺失次数} = 30 \times 10^6 \times 0.01 = 300,000 \, \text{次/秒}.$
#### 主存带宽计算：
主存与Cache之间交换的块大小为16 B（即128位）。  
每次Cache缺失需要从主存传输16 B，且总线宽度为32位（即4字节）。因此，每次Cache缺失需要：$\frac{16 \, \text{B}}{4 \, \text{B}} = 4 \, \text{次总线传输}.$
总的传输次数为：$\text{传输次数} = 300,000 \times 4 = 1,200,000 \, \text{次/秒}.$
主存带宽需求为：$\text{主存带宽} = 1,200,000 \, \text{次/秒} \times 4 \, \text{B/次} = 4.8 \, \text{MB/s}.$
因此，主存带宽至少需要达到 **4.8 MB/s** 才能满足CPU的访存要求。
### (2) **缺页异常与DMA请求次数**
#### 缺页异常次数：
Cache缺失次数为每秒 300,000 次,假设每次访问主存的缺页率为 $0.0005\% = 5 \times 10^{-6}$
平均每秒产生的缺页异常次数为：
$\text{缺页异常次数} = 300,000 \times 5 \times 10^{-6} = 1.5 \, \text{次/秒}.$
#### DMA请求次数：
页面大小为4 KB（即$4 \times 1024 = 4096 \, \text{字节}$），数据缓冲寄存器为32位（即4字节）。  
每次缺页需要从磁盘传输整个页面，因此每次缺页需要的DMA请求次数为：
$\text{DMA请求次数/缺页} = \frac{4096 \, \text{B}}{4 \, \text{B}} = 1024 \, \text{次}.$
每秒的DMA请求次数为：$\text{DMA请求次数} = 1.5 \, \text{次/秒} \times 1024 \, \text{次/缺页} = 1536 \, \text{次/秒}.$
### (3) **CPU与DMA控制器的优先级**
在CPU与DMA控制器同时请求存储器总线的情况下， **DMA控制器的优先级通常更高**。原因如下：
1. **实时性要求**：DMA用于高效的数据传输，通常直接控制外设与存储器之间的数据交换，涉及外设的实时响应需求。如果DMA未能及时获得总线，可能导致数据丢失或外设无法正常运行。
2. **CPU的缓冲能力**：CPU可以通过缓存(Cache)暂时减少对主存的直接访问需求，而DMA直接依赖总线进行传输，无法自行缓冲。
    
因此，DMA控制器优先级更高有助于保证系统的整体性能和数据传输的及时性。
## 6.3
1. I/O 设备需要和主机进行有效连接，才能实现数据的输入、输出。I/O 设备通常又不能直接和主机相连，解决办法就是在 I/O 设备和主机双方之间增设一个中间电路，双方通过增设的中间电路交换数据，这个中间电路（中间装置）就是I/O 接口。
2. I/O 接口的主要功能有：数据格式转换、信号电平转换、并行/串行数字转换、数字/模拟信号转换、端口寻址、数据缓冲、管理控制功能