### 3.1.1 整数加法

#### 3.1.1.1 无符号数加法：定义  $+^u_w$  为两个取值为$[0,2^w)$的无符号数的加法

表达式（u 表示无符号数）：x  **$+^u_w$** y = $\begin{cases}
	x+y, x+y<2^w \\
	 \\
	x+y-2^w, 2^w<=x+y<2^w+1 \\ 
\end{cases}$

对溢出的解释

| a = 255       |       | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 1    |
| ------------- | ----- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| **b = 1**     |       | 0    | 0    | 0    | 0    | 0    | 0    | 0    | 1    |
| **c = a + b** | ~~1~~ | 0    | 0    | 0    | 0    | 0    | 0    | 0    | 0    |

为使得结果的数据位数保持 w 位不变，最高位会被截断

  即为 c = a + b - $2^w$

```c
int unsigned_add(unsigned x,unsigned y)
{
    unsigned sum = x + y;
    // 是否溢出
    if (sum >= x)
        return 1;
    else
        return 0;
}
```

#### 3.1.1.2 有符号数加法：定义 $+^t_w$ 为两个取值为 $[-2^w-1^,2^w-1^-1)的有符号数的加法$

表达式（t 表示补码）：x  $+^t_{w}$ y = $\begin{cases}
	X+y+2^w, x+y<-2^{w-1} //负溢出：结果太小溢出为正值\\
	 \\
	X+y,-2^{w-1}<=x+y<2^{w-1}// 正常情况 \\
	 \\
	X+y-2^w, 2^{w-1}<=x+y//正溢出：结果太大溢出为负值 \\ 
\end{cases}$

##### **对正溢出的解释**

| a = 127       | 0   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |
| ------------- | --- | --- | --- | --- | --- | --- | --- | --- |
| **b = 1**     | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 1   |
| **c = a + b** | 1   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |

此处的首位 1 表示了负值，$c = a + b - 2^8 = -128$

##### **对负溢出的解释**

| a = -128      |       | 1   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |
| ------------- | ----- | --- | --- | --- | --- | --- | --- | --- | --- |
| **b = -1**    |       | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |
| **c = a + b** | ~~1~~ | 0   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |

此处的首位 0 表示了正值，$c = a + b + 2^8 = 127$

##### 检验溢出

两个正数相加得到负数：正溢出

两个负数相加得到正数：负溢出

---

### 3.1.2 整数减法：加法逆元

**定义：** 对于给出的 x，有 x 使得 x + x =  0

**计算方法**

(w 位无符号数 x)          $-^u_w$ x = $\begin{cases}
	X, x=0 \\
	\\
	2^w - x, x>=0 \\
\end{cases}$    x 的范围：$[0,2^w)$

(有符号数)                  $-^t_w$ x = $\begin{cases}
	-x, x>TMin_w \\
	\\
	TMin_w, x=TMin_w \\
\end{cases}$     x 的范围：$[-2^w-1,2^w-1 -1)$

$TMin_w + TMin_w = -2^w$

$TMin_w + ^t_w TMin_w =0$

### 溢出问题
![[../../Pasted image 20241106225703.png]]
## 硬件部分见第四章前置知识：[[../Chapter4/4.0 前置知识：CPU组件|4.0 前置知识：CPU组件]]

### [[第三章 计算机的算术运算|回到目录]]